{% extends "base.html" %}
{% block content %}
    <!-- Modal Structure -->
    <div id="dupTitleModal" class="modal">
        <div class="modal-content">
            <!-- title and close button -->
            <div class="modal-title-row row">
                <div class="col s11">
                    <h4 id="modalTitle">Duplicate Quiz Title</h4>
                </div>
                <div class="col s1 modal-close-button">
                    <a id="modalClose" class="modal-action modal-close light-blue-text text-darken-4" href="#">&times</a>
                </div>
            </div>
            <!-- quiz title -->
            <div class="row">
                <div class="input-field col s12">
                    <input id="quizTitle" name="quiz_title" type="text" minlength="5" maxlength="100" value="{{ viewQuiz.title }}" required>
                    <label for="quizTitle" data-error="Invalid Quiz Title" data-dup="Quiz Title already in use.  Please choose another." data-default="Quiz Title">Quiz Title</label>
                </div>
            </div>
            <!-- save changes -->
            <div class="row modal-action-container">
                <button id="modalSubmitButton" data-quizId="{{ viewQuiz._id }}" class="col s12 btn-large light-blue darken-4 text-shadow">
                    Save Changes <i class="fas fa-user-check"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="viewQuiz" class="container">
        <div class="row">
            <div class="col s1"></div>
            <div class="col s10">
                <h3 id="quizOriginalTitle" class="light-blue-text text-darken-4 center-align">{{ viewQuiz.title }}</h3>
            </div>
            <div class="col s1">
                <h3 class="right-align">
                    <a class="light-blue-text text-darken-4 copy-quiz" href="#!">
                        <i class="fas fa-copy fa-fw"></i>
                    </a>
                </h3>
            </div>
        </div>
        <h5 class="light-blue-text text-darken-4 center-align">By: {{ viewQuiz.author }}</h5>
        <h5 class="light-blue-text text-darken-4 center-align">Category: <i class="fas {{ viewQuiz.category_icon.class }} fa-fw"></i> {{ viewQuiz.category }}</h5>
        <div class="divider"></div>
        <div class="quiz-container">
            {% for round in viewQuiz.rounds %}
                <h5 class="light-blue-text text-darken-4 center-align">
                    Round {{ round.round_num }}
                    <p>
                        {% if viewQuiz.category == 'general knowledge' %}
                            <i class="fas {{ round.category_icon.class }} fa-fw"></i>
                        {% endif %}
                        {{ round.title }}
                    </p>
                </h5>
                {% for question in round.questions %}
                    <h6 class="light-blue-text text-darken-4 left-align">
                        Q{{ question.question_num}}) {{ question.question_text }}
                    </h6>

                    {% if question.question_img_url != '' %}
                        <div class="center-align">
                            <img id="img_q_{{ round.round_num }}_{{ question.question_num }}" class="quiz-image hidden" src="">
                            <div class="preloader-container">
                                <div class="preloader-wrapper big active">
                                    <div class="spinner-layer">
                                        <div class="circle-clipper left">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="gap-patch">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="circle-clipper right">
                                            <div class="circle"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if question.multiple_choice == False %}
                        <h6 class="light-blue-text text-darken-4 left-align">
                            &emsp;A{{ question.question_num }}) {{ question.answer_text }}
                        </h6>
                        {% if question.answer_img_url != '' %}
                            <div class="center-align">
                                <img id="img_a_{{ round.round_num }}_{{ question.question_num }}" class="quiz-image hidden" src="">
                                <div class="preloader-container">
                                    <div class="preloader-wrapper big active">
                                        <div class="spinner-layer">
                                            <div class="circle-clipper left">
                                                <div class="circle"></div>
                                            </div>
                                            <div class="gap-patch">
                                                <div class="circle"></div>
                                            </div>
                                            <div class="circle-clipper right">
                                                <div class="circle"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% else %}
                        {% for option in question.multiple_choice_options %}
                            <h6 class="light-blue-text text-darken-4">
                                &emsp;{{ option.option_num}}) {{ option.answer_text }}
                                {% if option.answer_text != '' %}
                                    {% if option.correct == True %}
                                        <i class="fas fa-check fa-fw"></i>
                                    {% endif %}
                                {% endif %}
                            </h6>
                            {% if option.answer_img_url != '' %}
                                <div class="center-align">
                                    <img id="img_o_{{ round.round_num }}_{{ question.question_num }}_{{ option.option_num }}" class="quiz-image hidden" src="">
                                    <div class="preloader-container">
                                        <div class="preloader-wrapper big active">
                                            <div class="spinner-layer">
                                                <div class="circle-clipper left">
                                                    <div class="circle"></div>
                                                </div>
                                                <div class="gap-patch">
                                                    <div class="circle"></div>
                                                </div>
                                                <div class="circle-clipper right">
                                                    <div class="circle"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% if option.answer_text == '' %}
                                    {% if option.correct == True %}
                                        <h6 class="light-blue-text text-darken-4">
                                            <i class="fas fa-check fa-fw"></i>
                                        </h6>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    <div class="divider"></div>
                {% endfor %}
                <div class="divider"></div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="{{ url_for('static', filename='js/copyquiz.js') }}"></script>
    <script src="{{ url_for('static', filename='js/viewquiz.js') }}"></script>
    <script>
        $(function() {
          loadImg({{ viewQuiz.rounds | tojson }});
        });
    </script>
{% endblock %}