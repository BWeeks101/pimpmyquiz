{% extends "base.html" %}
{% block content %}
    <!-- Modal Structure -->
    <div id="dupTitleModal" class="modal">
        <div class="modal-content">
            <!-- title and close button -->
            <div class="modal-title-row row">
                <div class="col s11">
                    <h4>Duplicate Quiz Title</h4>
                </div>
                <div class="col s1 modal-close-button">
                    <a class="modal-action modal-close light-blue-text text-darken-4" href="#!">&times</a>
                </div>
            </div>
            <!-- quiz title -->
            <div class="row">
                <div class="input-field col s12">
                    <input id="quizTitle" name="quiz_title" type="text" minlength="5" maxlength="100" value="" required>
                    <label for="quizTitle" data-error="Invalid Quiz Title" data-dup="Quiz Title already in use.  Please choose another." data-default="Quiz Title">Quiz Title</label>
                </div>
            </div>
            <!-- save changes -->
            <div class="row modal-action-container">
                <button id="modalSubmitButton" data-quizId="" class="col s12 btn-large light-blue darken-4 text-shadow">
                    Save Changes <i class="fas fa-user-check"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="changeConfModal" class="modal">
        <div class="modal-content">
            <!-- title and close button -->
            <div class="modal-title-row row">
                <div class="col s11">
                    <h4 id="modalTitle"></h4>
                </div>
                <div class="col s1 modal-close-button">
                    <a id="modalClose" class="modal-action modal-close light-blue-text text-darken-4" href="#!">&times</a>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <h5 id="modalMessage"></h5>
                </div>
            </div>
            <!-- save changes -->
            <div class="row modal-action-container">
                <div class="col s6"></div>
                <div class="col s3">
                    <button id="modalYesButton" class="col s12 btn-large light-blue darken-4 text-shadow">
                        Yes <i class="fas fa-check"></i>
                    </button>
                </div>
                <div class="col s3">
                    <button id="modalNoButton" class="col s12 btn-large light-blue darken-4 text-shadow">
                        No <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <h3 class="light-blue-text text-darken-4 center-align">Quiz Search</h3>
    <div class="quiz-search container">
        <!-- quiz search-->
        <div class="row">
            <div class="input-field col s12">
                <i class="fas fa-search prefix light-blue-text text-darken-4"></i>
                <input id="quizSearch" name="quizSearch" type="text" minlength="1" value="" class="validate">
                <label class="truncate" for="quizSearch" data-error="Please Enter at least 1 Character." data-default="Search Quizzes">Search Quizzes</label>
            </div>
        </div>
        <div class="row">
            <!-- quiz category selection -->
            <div class="input-field col s12 select-container">
                <i id="quizCategoryIcon" class="prefix light-blue-text text-darken-4 fas fa-asterisk"></i>
                <select id="quizCategory" name="quizCategory">
                    <optgroup label='<div class="subopt"><i class="fas fa-asterisk fa-fw light-blue-text text-darken-4"></i> <span class="light-blue-text text-darken-4">All</span></div>'>
                        <option>All</option>
                    </optgroup>
                    {% for category in categories %}
                    <optgroup label='<div class="subopt"><i class="fas {{ category.category_icon["class"] }} fa-fw light-blue-text text-darken-4"></i> <span class="light-blue-text text-darken-4">{{ category.category }}</span></div>'>
                        <option>{{ category.category }}</option>
                    </optgroup>
                    {% endfor %}
                </select>
                <label>Category Filter</label>
            </div>
        </div>
        <!-- search button -->
        <div class="row search-action-container">
            <button id="searchButton" type="submit" data-type="global" class="col s12 btn-large light-blue darken-4 text-shadow">
                Search <i class="fas fa-search"></i>
            </button>
        </div>
    </div>
    <div id="quizCollection" class="container">
        <div class="results-control hidden">
            <a href="#" class="results-control-first"><i class="fas fa-angle-double-left fa-fw tooltipped light-blue-text text-darken-4" data-position="bottom" data-tooltip="First"></i></a>
            <a href="#" class="results-control-prev"><i class="fas fa-angle-left fa-fw tooltipped light-blue-text text-darken-4" data-position="bottom" data-tooltip="Previous"></i></a>
            <input class="pageNumber browser-default" name="pageNumber" type="text" minlength="1" maxlength="4" pattern="^[0-9]{1,4}$" value="1">
            <span class="light-blue-text text-darken-4">of</span>
            <span class="totalPages light-blue-text text-darken-4"></span>
            <a href="#" class="results-control-next"><i class="fas fa-angle-right fa-fw tooltipped light-blue-text text-darken-4" data-position="bottom" data-tooltip="Next"></i></a>
            <a href="#" class="results-control-last"><i class="fas fa-angle-double-right fa-fw tooltipped light-blue-text text-darken-4" data-position="bottom" data-tooltip="Last"></i></a>
        </div>
        <div id="quizSearchResults" class="results-data">
            <!--returned records go here-->
        </div>
    </div>
{% endblock%}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/copyquiz.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quizlist.js') }}"></script>
    <script>
        // Convert mongoDB data to JS global array for use in this template
        let categoryList = createCategoryArray({{ categories | tojson }});
        categoryList.unshift({'category': 'All', 'category_icon': 'fa-asterisk'})
    </script>
{% endblock %}